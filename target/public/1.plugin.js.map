{"version":3,"file":"1.plugin.js","sources":["/plugin:opendistro-notebooks-kibana/plugins/kibana-notebooks/public/application.tsx","/plugin:opendistro-notebooks-kibana/plugins/kibana-notebooks/public/components/app.tsx","/plugin:opendistro-notebooks-kibana/plugins/kibana-notebooks/public/components/helpers/custom_modals/custom_input_modal.tsx","/plugin:opendistro-notebooks-kibana/plugins/kibana-notebooks/public/components/helpers/default_parser.tsx","/plugin:opendistro-notebooks-kibana/plugins/kibana-notebooks/public/components/helpers/modal_containers.tsx","/plugin:opendistro-notebooks-kibana/plugins/kibana-notebooks/public/components/helpers/panel_wrapper.tsx","/plugin:opendistro-notebooks-kibana/plugins/kibana-notebooks/public/components/helpers/zeppelin_parser.tsx","/plugin:opendistro-notebooks-kibana/plugins/kibana-notebooks/public/components/main.tsx","/plugin:opendistro-notebooks-kibana/plugins/kibana-notebooks/public/components/note_table.tsx","/plugin:opendistro-notebooks-kibana/plugins/kibana-notebooks/public/components/notebook.tsx","/plugin:opendistro-notebooks-kibana/plugins/kibana-notebooks/public/components/paragraph_components/para_input.tsx","/plugin:opendistro-notebooks-kibana/plugins/kibana-notebooks/public/components/paragraph_components/para_output.tsx","/plugin:opendistro-notebooks-kibana/plugins/kibana-notebooks/public/components/paragraph_components/paragraphs.tsx"],"sourcesContent":["/*\n * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { KibanaNotebooksApp } from './components/app';\nexport const renderApp = ({\n  notifications,\n  http,\n  chrome\n}, {\n  navigation,\n  dashboard\n}, {\n  appBasePath,\n  element\n}) => {\n  ReactDOM.render( /*#__PURE__*/React.createElement(KibanaNotebooksApp, {\n    basename: appBasePath,\n    notifications: notifications,\n    http: http,\n    chrome: chrome,\n    navigation: navigation,\n    DashboardContainerByValueRenderer: dashboard.DashboardContainerByValueRenderer\n  }), element);\n  return () => ReactDOM.unmountComponentAtNode(element);\n};","/*\n * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\nimport React from 'react';\nimport { I18nProvider } from '@kbn/i18n/react';\nimport { Main } from './main';\nexport const KibanaNotebooksApp = ({\n  basename,\n  notifications,\n  http,\n  chrome,\n  navigation,\n  DashboardContainerByValueRenderer\n}) => {\n  // Render the application DOM.\n  return /*#__PURE__*/React.createElement(I18nProvider, null, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Main, {\n    basename: basename,\n    DashboardContainerByValueRenderer: DashboardContainerByValueRenderer,\n    http: http,\n    setBreadcrumbs: chrome.setBreadcrumbs\n  })));\n};","/*\n * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\nimport React, { useState } from 'react';\nimport { EuiButtonEmpty, EuiForm, EuiModal, EuiModalBody, EuiModalFooter, EuiModalHeader, EuiModalHeaderTitle, EuiOverlayMask, EuiFormRow, EuiFieldText, EuiButton } from '@elastic/eui';\n/*\n * \"CustomInputModalProps\" component is used to create a modal with an input filed\n *\n * Props taken in as params are:\n * runModal - function to fetch input field value and trigger closing modal\n * closeModal - function to trigger closing modal\n * titletxt - string as header for title of modal\n * labelTxt - string as header for input field\n * btn1txt - string as content to fill \"close button\"\n * btn2txt - string as content to fill \"confirm button\"\n * openNoteName - Default input value for the field\n */\n\nexport const CustomInputModal = props => {\n  const {\n    runModal,\n    closeModal,\n    labelTxt,\n    titletxt,\n    btn1txt,\n    btn2txt,\n    openNoteName,\n    helpText\n  } = props;\n  const [value, setValue] = useState(openNoteName || ''); // sets input value\n\n  const onChange = e => {\n    setValue(e.target.value);\n  };\n\n  return /*#__PURE__*/React.createElement(EuiOverlayMask, null, /*#__PURE__*/React.createElement(EuiModal, {\n    onClose: closeModal,\n    initialFocus: \"[name=input]\"\n  }, /*#__PURE__*/React.createElement(EuiModalHeader, null, /*#__PURE__*/React.createElement(EuiModalHeaderTitle, null, titletxt)), /*#__PURE__*/React.createElement(EuiModalBody, null, /*#__PURE__*/React.createElement(EuiForm, null, /*#__PURE__*/React.createElement(EuiFormRow, {\n    label: labelTxt,\n    helpText: helpText\n  }, /*#__PURE__*/React.createElement(EuiFieldText, {\n    name: \"input\",\n    value: value,\n    onChange: e => onChange(e)\n  })))), /*#__PURE__*/React.createElement(EuiModalFooter, null, /*#__PURE__*/React.createElement(EuiButtonEmpty, {\n    onClick: closeModal\n  }, btn1txt), /*#__PURE__*/React.createElement(EuiButton, {\n    onClick: () => runModal(value),\n    fill: true\n  }, btn2txt))));\n};","/*\n * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\n// Get the type of output and result in a default notebook paragraph\n// Param: Default Backend Paragraph\nconst parseOutput = paraObject => {\n  try {\n    let outputType = [];\n    let result = [];\n    paraObject.output.map(output => {\n      outputType.push(output.outputType);\n      result.push(output.result);\n    });\n    return {\n      outputType: outputType,\n      outputData: result\n    };\n  } catch (error) {\n    return {\n      outputType: [],\n      outputData: []\n    };\n  }\n}; // Get the coding language by type of paragraph\n// Param: Default Backend Paragraph\n\n\nconst parseInputType = paraObject => {\n  try {\n    if (paraObject.input.inputType === 'MARKDOWN') {\n      return 'md';\n    } else {\n      return '';\n    }\n  } catch (error) {\n    throw new Error('Parsing Input Issue ' + error);\n  }\n}; // Get the visualization by type of paragraph\n// Param: Default Backend Paragraph\n\n\nconst parseVisualization = paraObject => {\n  try {\n    if (paraObject.input.inputType === 'VISUALIZATION') {\n      let vizContent = paraObject.input.inputText;\n      const startDate = new Date();\n      startDate.setDate(startDate.getDate() - 30);\n      let visStartTime = startDate.toISOString();\n      let visEndTime = new Date().toISOString();\n      let visSavedObjId = '';\n\n      if (vizContent !== '') {\n        const {\n          panels,\n          timeRange\n        } = JSON.parse(vizContent);\n        visStartTime = timeRange.from;\n        visEndTime = timeRange.to;\n        visSavedObjId = panels['1'].explicitInput.savedObjectId;\n      }\n\n      return {\n        isViz: true,\n        VizObject: vizContent,\n        visStartTime,\n        visEndTime,\n        visSavedObjId\n      };\n    } else {\n      return {\n        isViz: false,\n        VizObject: ''\n      };\n    }\n  } catch (error) {\n    throw new Error('Parsing Input Issue ' + error);\n  }\n}; // Placeholder for default parser\n// Param: Default Backend Paragraph\n\n\nexport const defaultParagraphParser = defaultBackendParagraphs => {\n  let parsedPara = [];\n\n  try {\n    defaultBackendParagraphs.map((paraObject, index) => {\n      const codeLanguage = parseInputType(paraObject);\n      const vizParams = parseVisualization(paraObject);\n      const message = parseOutput(paraObject);\n      let tempPara = {\n        uniqueId: paraObject.id,\n        isRunning: false,\n        inQueue: false,\n        isSelected: false,\n        isInputHidden: false,\n        isOutputHidden: false,\n        showAddPara: false,\n        isVizualisation: vizParams.isViz,\n        vizObjectInput: vizParams.VizObject,\n        id: index + 1,\n        inp: paraObject.input.inputText || '',\n        lang: 'text/x-' + codeLanguage,\n        editorLanguage: codeLanguage,\n        typeOut: message.outputType,\n        out: message.outputData,\n        isInputExpanded: false,\n        isOutputStale: false,\n        paraRef: undefined,\n        paraDivRef: undefined,\n        visStartTime: vizParams.visStartTime,\n        visEndTime: vizParams.visEndTime,\n        visSavedObjId: vizParams.visSavedObjId\n      };\n      parsedPara.push(tempPara);\n    });\n    return parsedPara;\n  } catch (error) {\n    throw new Error('Parsing Paragraph Issue ' + error);\n  }\n};","/*\n * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\nimport React, { useState } from 'react';\nimport { EuiOverlayMask, EuiConfirmModal, EuiButton, EuiButtonEmpty, EuiFieldText, EuiForm, EuiFormRow, EuiModal, EuiModalBody, EuiModalFooter, EuiModalHeader, EuiModalHeaderTitle, EuiText, EuiSpacer } from '@elastic/eui';\nimport { CustomInputModal } from './custom_modals/custom_input_modal';\n/* The file contains helper functions for modal layouts\n * getCustomModal - returns modal with input field\n * getCloneModal - returns a confirm-modal with clone option\n * getDeleteModal - returns a confirm-modal with delete option\n */\n\nexport const getCustomModal = (runModal, closeModal, labelTxt, titletxt, btn1txt, btn2txt, openNoteName, helpText) => {\n  return /*#__PURE__*/React.createElement(CustomInputModal, {\n    runModal: runModal,\n    closeModal: closeModal,\n    labelTxt: labelTxt,\n    titletxt: titletxt,\n    btn1txt: btn1txt,\n    btn2txt: btn2txt,\n    openNoteName: openNoteName,\n    helpText: helpText\n  });\n};\nexport const getCloneModal = (onCancel, onConfirm) => {\n  return /*#__PURE__*/React.createElement(EuiOverlayMask, null, /*#__PURE__*/React.createElement(EuiConfirmModal, {\n    title: \"Clone Notebook\",\n    onCancel: onCancel,\n    onConfirm: onConfirm,\n    cancelButtonText: \"Cancel\",\n    confirmButtonText: \"Yes\",\n    defaultFocusedButton: \"confirm\"\n  }, /*#__PURE__*/React.createElement(\"p\", null, \"Do you want to clone this notebook?\")));\n};\nexport const getDeleteModal = (onCancel, onConfirm, title, message, confirmMessage) => {\n  return /*#__PURE__*/React.createElement(EuiOverlayMask, null, /*#__PURE__*/React.createElement(EuiConfirmModal, {\n    title: title,\n    onCancel: onCancel,\n    onConfirm: onConfirm,\n    cancelButtonText: \"Cancel\",\n    confirmButtonText: confirmMessage || \"Delete\",\n    buttonColor: \"danger\",\n    defaultFocusedButton: \"confirm\"\n  }, message));\n};\nexport const DeleteNotebookModal = ({\n  onCancel,\n  onConfirm,\n  title,\n  message\n}) => {\n  const [value, setValue] = useState('');\n\n  const onChange = e => {\n    setValue(e.target.value);\n  };\n\n  return /*#__PURE__*/React.createElement(EuiOverlayMask, null, /*#__PURE__*/React.createElement(EuiModal, {\n    onClose: onCancel,\n    initialFocus: \"[name=input]\"\n  }, /*#__PURE__*/React.createElement(EuiModalHeader, null, /*#__PURE__*/React.createElement(EuiModalHeaderTitle, null, title)), /*#__PURE__*/React.createElement(EuiModalBody, null, /*#__PURE__*/React.createElement(EuiText, null, message), /*#__PURE__*/React.createElement(EuiText, null, \"The action cannot be undone.\"), /*#__PURE__*/React.createElement(EuiSpacer, null), /*#__PURE__*/React.createElement(EuiForm, null, /*#__PURE__*/React.createElement(EuiFormRow, {\n    label: \"To confirm deletion, enter \\\"delete\\\" in the text field\"\n  }, /*#__PURE__*/React.createElement(EuiFieldText, {\n    name: \"input\",\n    placeholder: \"delete\",\n    value: value,\n    onChange: e => onChange(e)\n  })))), /*#__PURE__*/React.createElement(EuiModalFooter, null, /*#__PURE__*/React.createElement(EuiButtonEmpty, {\n    onClick: onCancel\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(EuiButton, {\n    onClick: () => onConfirm(),\n    color: \"danger\",\n    fill: true,\n    disabled: value !== 'delete'\n  }, \"Delete\"))));\n};","/*\n * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\nimport React from 'react';\nimport { EuiPanel } from '@elastic/eui';\nexport function PanelWrapper({\n  shouldWrap,\n  children\n}) {\n  return shouldWrap ? /*#__PURE__*/React.createElement(EuiPanel, null, children) : /*#__PURE__*/React.createElement(React.Fragment, null, children);\n}","/*\n * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\n\n/* This file contains parsing functions\n * These functions have to be changed based on backend configuration\n * If backend changes the incoming paragraph structures may change, so parsing adapts to it\n */\nconst visualizationPrefix = '%sh #vizobject:';\nconst langSupport = {\n  '%sh': 'shell',\n  '%md': 'md',\n  '%python': 'python',\n  '%odfesql': 'sql',\n  '%elasticsearch': 'json'\n}; // Get the coding language from a Zeppelin paragraph input\n// Param: textHeader-> header on a Zeppelin paragraph example \"%md\"\n\nconst parseCodeLanguage = textHeader => {\n  const codeLanguage = langSupport[textHeader];\n  return codeLanguage || '';\n}; // Get the type of output message from a Zeppelin paragraph\n// Param: Zeppelin Paragraph\n\n\nconst parseMessage = paraObject => {\n  try {\n    let mtype = [];\n    let mdata = [];\n    paraObject.results.msg.map(msg => {\n      mtype.push(msg.type);\n      mdata.push(msg.data);\n    });\n    return {\n      outputType: mtype,\n      outputData: mdata\n    };\n  } catch (error) {\n    return {\n      outputType: [],\n      outputData: []\n    };\n  }\n}; // Get the type of output message from a Zeppelin paragraph\n// Param: Zeppelin Paragraph\n\n\nconst parseText = paraObject => {\n  if ('text' in paraObject) {\n    return paraObject.text;\n  } else {\n    throw new Error('Input text parse issue');\n  }\n}; // Get the visualization from a Zeppelin Paragraph input\n// All Visualizations in Zeppelin are stored as shell comment -> \"%sh #vizobject:\"\n// TODO: This is a workaround need to look for better solutions\n// Param: Zeppelin Paragraph\n\n\nconst parseVisualization = paraObject => {\n  let vizContent = '';\n\n  if ('text' in paraObject && paraObject.text.substring(0, 15) === visualizationPrefix) {\n    if (paraObject.title !== 'VISUALIZATION') {\n      throw new Error('Visualization parse issue');\n    }\n\n    vizContent = paraObject.text.substring(15);\n    return {\n      isViz: true,\n      VizObject: vizContent\n    };\n  } else {\n    return {\n      isViz: false,\n      VizObject: vizContent\n    };\n  }\n}; // This parser is used to get paragraph id\n// Param: Zeppelin Paragraph\n\n\nconst parseId = paraObject => {\n  if ('id' in paraObject) {\n    return paraObject.id;\n  } else {\n    throw new Error('Id not found in paragraph');\n  }\n}; // This parser helps to convert Zeppelin paragraphs to a common ParaType format\n// This parsing makes any backend notebook compatible with notebooks plugin\n\n\nexport const zeppelinParagraphParser = zeppelinBackendParagraphs => {\n  let parsedPara = [];\n\n  try {\n    zeppelinBackendParagraphs.map((paraObject, index) => {\n      const paragraphId = parseId(paraObject);\n      const vizParams = parseVisualization(paraObject);\n      const inputParam = parseText(paraObject);\n      const codeLanguage = parseCodeLanguage(inputParam.split('\\n')[0].split('.')[0]);\n      const message = parseMessage(paraObject);\n      let tempPara = {\n        uniqueId: paragraphId,\n        isRunning: false,\n        inQueue: false,\n        ishovered: false,\n        isSelected: false,\n        isInputHidden: false,\n        isOutputHidden: false,\n        showAddPara: false,\n        isVizualisation: vizParams.isViz,\n        vizObjectInput: vizParams.VizObject,\n        id: index + 1,\n        inp: inputParam,\n        lang: 'text/x-' + codeLanguage,\n        editorLanguage: codeLanguage,\n        typeOut: message.outputType,\n        out: message.outputData\n      };\n      parsedPara.push(tempPara);\n    });\n    return parsedPara;\n  } catch (error) {\n    throw new Error('Parsing Paragraph Issue ' + error);\n  }\n};","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*\n * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\nimport React from 'react';\nimport { Notebook } from './notebook';\nimport { API_PREFIX, DOCUMENTATION_URL } from '../../common';\nimport { NoteTable } from './note_table';\nimport { HashRouter } from 'react-router-dom';\nimport { Switch, Route } from 'react-router';\nimport { EuiGlobalToastList, EuiLink } from '@elastic/eui';\nexport class Main extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"setToast\", (title, color = 'success', text = '') => {\n      this.setState({\n        toasts: [{\n          id: new Date().toISOString(),\n          title,\n          text,\n          color\n        }]\n      });\n    });\n\n    _defineProperty(this, \"fetchNotebooks\", () => {\n      return this.props.http.get(`${API_PREFIX}/`).then(res => this.setState(res)).catch(err => {\n        console.error('Issue in fetching the notebooks', err.body.message);\n      });\n    });\n\n    _defineProperty(this, \"createNotebook\", newNoteName => {\n      if (newNoteName.length >= 50 || newNoteName.length === 0) {\n        this.setToast('Invalid notebook name', 'danger');\n        return;\n      }\n\n      const newNoteObject = {\n        name: newNoteName\n      };\n      return this.props.http.post(`${API_PREFIX}/note`, {\n        body: JSON.stringify(newNoteObject)\n      }).then(async res => {\n        this.setToast(`Notebook \"${newNoteName}\" successfully created!`);\n        window.location.assign(`${this.props.basename}#${res.body}`);\n      }).catch(err => {\n        this.setToast('Please ask your administrator to enable Notebooks for you.', 'danger', /*#__PURE__*/React.createElement(EuiLink, {\n          href: DOCUMENTATION_URL,\n          target: \"_blank\"\n        }, \"Documentation\"));\n        console.error(err);\n      });\n    });\n\n    _defineProperty(this, \"renameNotebook\", (editedNoteName, editedNoteID) => {\n      if (editedNoteName.length >= 50 || editedNoteName.length === 0) {\n        this.setToast('Invalid notebook name', 'danger');\n        return;\n      }\n\n      const renameNoteObject = {\n        name: editedNoteName,\n        noteId: editedNoteID\n      };\n      return this.props.http.put(`${API_PREFIX}/note/rename`, {\n        body: JSON.stringify(renameNoteObject)\n      }).then(res => {\n        this.fetchNotebooks();\n        this.setToast(`Notebook successfully renamed into \"${editedNoteName}\"`);\n      }).catch(err => this.setToast('Issue in renaming the notebook ' + err.body.message, 'danger'));\n    });\n\n    _defineProperty(this, \"cloneNotebook\", (clonedNoteName, clonedNoteID) => {\n      const cloneNoteObject = {\n        name: clonedNoteName,\n        noteId: clonedNoteID\n      };\n      return this.props.http.post(`${API_PREFIX}/note/clone`, {\n        body: JSON.stringify(cloneNoteObject)\n      }).then(res => {\n        this.fetchNotebooks();\n        this.setToast(`Notebook \"${clonedNoteName}\" successfully created!`);\n        return res.body;\n      }).catch(err => this.setToast('Issue in cloning the notebook ' + err.body.message, 'danger'));\n    });\n\n    _defineProperty(this, \"deleteNotebook\", (notebookId, notebookName, showToast = true) => {\n      return this.props.http.delete(`${API_PREFIX}/note/` + notebookId).then(res => {\n        this.fetchNotebooks();\n        if (showToast) this.setToast(`Notebook \"${notebookName}\" successfully deleted!`);\n      }).catch(err => this.setToast('Issue in deleting the notebook ' + err.body.message, 'danger'));\n    });\n\n    this.state = {\n      data: [],\n      openedNotebook: undefined,\n      toasts: []\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(HashRouter, {\n      basename: this.props.basename\n    }, /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EuiGlobalToastList, {\n      toasts: this.state.toasts,\n      dismissToast: removedToast => {\n        this.setState({\n          toasts: this.state.toasts.filter(toast => toast.id !== removedToast.id)\n        });\n      },\n      toastLifeTimeMs: 6000\n    }), /*#__PURE__*/React.createElement(Switch, null, /*#__PURE__*/React.createElement(Route, {\n      path: \"/:id\",\n      render: props => /*#__PURE__*/React.createElement(Notebook, {\n        basename: this.props.basename,\n        openedNoteId: props.match.params.id,\n        DashboardContainerByValueRenderer: this.props.DashboardContainerByValueRenderer,\n        http: this.props.http,\n        setBreadcrumbs: this.props.setBreadcrumbs,\n        renameNotebook: this.renameNotebook,\n        cloneNotebook: this.cloneNotebook,\n        deleteNotebook: this.deleteNotebook,\n        setToast: this.setToast\n      })\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      render: props => /*#__PURE__*/React.createElement(NoteTable, {\n        fetchNotebooks: this.fetchNotebooks,\n        notebooks: this.state.data,\n        createNotebook: this.createNotebook,\n        renameNotebook: this.renameNotebook,\n        cloneNotebook: this.cloneNotebook,\n        deleteNotebook: this.deleteNotebook,\n        setBreadcrumbs: this.props.setBreadcrumbs,\n        setToast: this.setToast\n      })\n    }))));\n  }\n\n}","/*\n * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\nimport { EuiButton, EuiContextMenuItem, EuiContextMenuPanel, EuiFieldSearch, EuiFlexGroup, EuiFlexItem, EuiHorizontalRule, EuiInMemoryTable, EuiLink, EuiOverlayMask, EuiPage, EuiPageBody, EuiPageContent, EuiPageContentHeader, EuiPageContentHeaderSection, EuiPageHeader, EuiPageHeaderSection, EuiPopover, EuiSpacer, EuiText, EuiTitle } from '@elastic/eui';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport React, { useEffect, useState } from 'react';\nimport { CREATE_NOTE_MESSAGE, DATE_FORMAT, DOCUMENTATION_URL } from '../../common';\nimport { getCustomModal, DeleteNotebookModal } from './helpers/modal_containers';\nexport function NoteTable(props) {\n  const [isModalVisible, setIsModalVisible] = useState(false); // Modal Toggle\n\n  const [modalLayout, setModalLayout] = useState( /*#__PURE__*/React.createElement(EuiOverlayMask, null)); // Modal Layout\n\n  const [isActionsPopoverOpen, setIsActionsPopoverOpen] = useState(false);\n  const [selectedNotebooks, setSelectedNotebooks] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const {\n    notebooks,\n    createNotebook,\n    renameNotebook,\n    cloneNotebook,\n    deleteNotebook\n  } = props;\n  useEffect(() => {\n    props.setBreadcrumbs([{\n      text: 'Notebooks',\n      href: '#'\n    }]);\n    props.fetchNotebooks();\n  }, []);\n\n  const closeModal = () => {\n    setIsModalVisible(false);\n  };\n\n  const showModal = () => {\n    setIsModalVisible(true);\n  };\n\n  const onCreate = async newNoteName => {\n    createNotebook(newNoteName);\n    closeModal();\n  };\n\n  const onRename = async newNoteName => {\n    renameNotebook(newNoteName, selectedNotebooks[0].id);\n    closeModal();\n  };\n\n  const onClone = async newName => {\n    cloneNotebook(newName, selectedNotebooks[0].id);\n    closeModal();\n  };\n\n  const onDelete = async () => {\n    const toastMessage = `Notebook${selectedNotebooks.length > 1 ? 's' : ' ' + selectedNotebooks[0].path} successfully deleted!`;\n    Promise.all(selectedNotebooks.map(notebook => deleteNotebook(notebook.id, undefined, false))).then(() => props.setToast(toastMessage)).catch(error => props.setToast('Issue in deleting notebooks' + error.body.message, 'danger'));\n    closeModal();\n  };\n\n  const createNote = () => {\n    setModalLayout(getCustomModal(onCreate, closeModal, 'Name', 'Create notebook', 'Cancel', 'Create', undefined, CREATE_NOTE_MESSAGE));\n    showModal();\n  };\n\n  const renameNote = () => {\n    setModalLayout(getCustomModal(onRename, closeModal, 'Name', 'Rename notebook', 'Cancel', 'Rename', selectedNotebooks[0].path, CREATE_NOTE_MESSAGE));\n    showModal();\n  };\n\n  const cloneNote = () => {\n    setModalLayout(getCustomModal(onClone, closeModal, 'Name', 'Duplicate notebook', 'Cancel', 'Duplicate', selectedNotebooks[0].path + ' (copy)', CREATE_NOTE_MESSAGE));\n    showModal();\n  };\n\n  const deleteNote = () => {\n    const notebookString = `notebook${selectedNotebooks.length > 1 ? 's' : ''}`;\n    setModalLayout( /*#__PURE__*/React.createElement(DeleteNotebookModal, {\n      onConfirm: onDelete,\n      onCancel: closeModal,\n      title: `Delete ${selectedNotebooks.length} ${notebookString}`,\n      message: `Are you sure you want to delete the selected ${selectedNotebooks.length} ${notebookString}?`\n    }));\n    showModal();\n  };\n\n  const popoverButton = /*#__PURE__*/React.createElement(EuiButton, {\n    iconType: \"arrowDown\",\n    iconSide: \"right\",\n    onClick: () => setIsActionsPopoverOpen(!isActionsPopoverOpen)\n  }, \"Actions\");\n  const popoverItems = [/*#__PURE__*/React.createElement(EuiContextMenuItem, {\n    key: \"rename\",\n    disabled: notebooks.length === 0 || selectedNotebooks.length !== 1,\n    onClick: () => {\n      setIsActionsPopoverOpen(false);\n      renameNote();\n    }\n  }, \"Rename\"), /*#__PURE__*/React.createElement(EuiContextMenuItem, {\n    key: \"duplicate\",\n    disabled: notebooks.length === 0 || selectedNotebooks.length !== 1,\n    onClick: () => {\n      setIsActionsPopoverOpen(false);\n      cloneNote();\n    }\n  }, \"Duplicate\"), /*#__PURE__*/React.createElement(EuiContextMenuItem, {\n    key: \"delete\",\n    disabled: notebooks.length === 0 || selectedNotebooks.length === 0,\n    onClick: () => {\n      setIsActionsPopoverOpen(false);\n      deleteNote();\n    }\n  }, \"Delete\")];\n  const tableColumns = [{\n    field: 'path',\n    name: 'Name',\n    sortable: true,\n    truncateText: true,\n    render: (value, record) => /*#__PURE__*/React.createElement(EuiLink, {\n      href: `#${record.id}`\n    }, _.truncate(value, {\n      'length': 100\n    }))\n  }, {\n    field: 'dateModified',\n    name: 'Last updated',\n    sortable: true,\n    render: value => moment(value).format(DATE_FORMAT)\n  }, {\n    field: 'dateCreated',\n    name: 'Created',\n    sortable: true,\n    render: value => moment(value).format(DATE_FORMAT)\n  }];\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EuiPage, null, /*#__PURE__*/React.createElement(EuiPageBody, {\n    component: \"div\"\n  }, /*#__PURE__*/React.createElement(EuiPageHeader, null, /*#__PURE__*/React.createElement(EuiPageHeaderSection, null, /*#__PURE__*/React.createElement(EuiTitle, {\n    size: \"l\"\n  }, /*#__PURE__*/React.createElement(\"h1\", null, \"Notebooks\")))), /*#__PURE__*/React.createElement(EuiPageContent, {\n    id: \"notebookArea\"\n  }, /*#__PURE__*/React.createElement(EuiPageContentHeader, null, /*#__PURE__*/React.createElement(EuiPageContentHeaderSection, null, /*#__PURE__*/React.createElement(EuiTitle, {\n    size: \"s\"\n  }, /*#__PURE__*/React.createElement(\"h3\", null, \"Notebooks\", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"panel-header-count\"\n  }, \" (\", notebooks.length, \")\"))), /*#__PURE__*/React.createElement(EuiSpacer, {\n    size: \"s\"\n  }), /*#__PURE__*/React.createElement(EuiText, {\n    size: \"s\",\n    color: \"subdued\"\n  }, \"Use Notebooks to interactively and collaboratively develop rich reports backed by live data. A notebook is a document made up of paragraphs that can combine markdown and visualizations with support for multi-timelines so that users can easily tell a story. Notebooks can be developed, shared and refreshed directly from Kibana to foster data driven exploration and collaboration among Elasticsearch users and their stakeholders. Common use cases for notebooks includes creating postmortem reports, designing run books, building live infrastructure reports, or even documentation.\", ' ', /*#__PURE__*/React.createElement(EuiLink, {\n    external: true,\n    href: DOCUMENTATION_URL,\n    target: \"blank\"\n  }, \"Learn more\"))), /*#__PURE__*/React.createElement(EuiPageContentHeaderSection, null, /*#__PURE__*/React.createElement(EuiFlexGroup, {\n    gutterSize: \"s\"\n  }, /*#__PURE__*/React.createElement(EuiFlexItem, null, /*#__PURE__*/React.createElement(EuiPopover, {\n    panelPaddingSize: \"none\",\n    button: popoverButton,\n    isOpen: isActionsPopoverOpen,\n    closePopover: () => setIsActionsPopoverOpen(false)\n  }, /*#__PURE__*/React.createElement(EuiContextMenuPanel, {\n    items: popoverItems\n  }))), /*#__PURE__*/React.createElement(EuiFlexItem, null, /*#__PURE__*/React.createElement(EuiButton, {\n    fill: true,\n    onClick: () => createNote()\n  }, \"Create notebook\"))))), /*#__PURE__*/React.createElement(EuiHorizontalRule, {\n    margin: \"m\"\n  }), /*#__PURE__*/React.createElement(EuiFieldSearch, {\n    fullWidth: true,\n    placeholder: \"Search notebooks\",\n    value: searchQuery,\n    onChange: e => setSearchQuery(e.target.value)\n  }), /*#__PURE__*/React.createElement(EuiHorizontalRule, {\n    margin: \"m\"\n  }), notebooks.length > 0 ? /*#__PURE__*/React.createElement(EuiInMemoryTable, {\n    items: searchQuery ? notebooks.filter(notebook => notebook.path.toLowerCase().includes(searchQuery.toLowerCase())) : notebooks,\n    itemId: \"id\",\n    columns: tableColumns,\n    tableLayout: \"auto\",\n    pagination: {\n      initialPageSize: 10,\n      pageSizeOptions: [8, 10, 13]\n    },\n    sorting: {\n      sort: {\n        field: 'dateModified',\n        direction: 'desc'\n      }\n    },\n    allowNeutralSort: false,\n    isSelectable: true,\n    selection: {\n      onSelectionChange: items => setSelectedNotebooks(items)\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EuiSpacer, {\n    size: \"xxl\"\n  }), /*#__PURE__*/React.createElement(EuiText, {\n    textAlign: \"center\"\n  }, /*#__PURE__*/React.createElement(\"h2\", null, \"No notebooks\"), /*#__PURE__*/React.createElement(EuiSpacer, {\n    size: \"m\"\n  }), /*#__PURE__*/React.createElement(EuiText, {\n    color: \"subdued\"\n  }, \"Use notebooks to create post-mortem reports, build live infrastructure\", /*#__PURE__*/React.createElement(\"br\", null), \"reports, or foster explorative collaborations with data.\")), /*#__PURE__*/React.createElement(EuiSpacer, {\n    size: \"m\"\n  }), /*#__PURE__*/React.createElement(EuiFlexGroup, {\n    justifyContent: \"spaceAround\"\n  }, /*#__PURE__*/React.createElement(EuiFlexItem, {\n    grow: false\n  }, /*#__PURE__*/React.createElement(EuiButton, {\n    fullWidth: false,\n    onClick: () => createNote()\n  }, \"Create notebook\"))), /*#__PURE__*/React.createElement(EuiSpacer, {\n    size: \"xxl\"\n  }))))), isModalVisible && modalLayout);\n}\n;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/*\n * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\nimport React, { Component } from 'react';\nimport { EuiTitle, EuiPage, EuiPageBody, EuiPageHeader, EuiPageHeaderSection, EuiButtonGroup, EuiButton, EuiFlexGroup, EuiFlexItem, EuiSpacer, EuiText, EuiPopover, EuiContextMenu, EuiOverlayMask, EuiIcon, EuiPanel, EuiCard } from '@elastic/eui';\nimport { Cells } from '@nteract/presentational-components';\nimport { Paragraphs } from './paragraph_components/paragraphs';\nimport { SELECTED_BACKEND, DATE_FORMAT, CREATE_NOTE_MESSAGE } from '../../common';\nimport { API_PREFIX } from '../../common';\nimport { zeppelinParagraphParser } from './helpers/zeppelin_parser';\nimport { defaultParagraphParser } from './helpers/default_parser';\nimport moment from 'moment';\nimport { PanelWrapper } from './helpers/panel_wrapper';\nimport { getDeleteModal, getCustomModal, DeleteNotebookModal } from './helpers/modal_containers';\n/*\n * \"Notebook\" component is used to display an open notebook\n *\n * Props taken in as params are:\n * basename - base url for kibana notebooks\n * DashboardContainerByValueRenderer - Dashboard container renderer for visualization\n * http object - for making API requests\n * setBreadcrumbs - sets breadcrumbs on top\n */\n\nexport class Notebook extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"parseAllParagraphs\", () => {\n      let parsedPara = this.parseParagraphs(this.state.paragraphs);\n      this.setState({\n        parsedPara\n      });\n    });\n\n    _defineProperty(this, \"parseParagraphs\", paragraphs => {\n      try {\n        let parsedPara;\n\n        if (SELECTED_BACKEND === 'ZEPPELIN') {\n          parsedPara = zeppelinParagraphParser(paragraphs);\n          this.setState({\n            vizPrefix: '%sh #vizobject:'\n          });\n        } else {\n          parsedPara = defaultParagraphParser(paragraphs);\n        }\n\n        parsedPara.forEach(para => {\n          para.isInputExpanded = this.state.selectedViewId === 'input_only';\n          para.paraRef = /*#__PURE__*/React.createRef();\n          para.paraDivRef = /*#__PURE__*/React.createRef();\n        });\n        return parsedPara;\n      } catch (error) {\n        console.error('Parsing paragraph has some issue', error);\n        this.setState({\n          parsedPara: []\n        });\n      }\n    });\n\n    _defineProperty(this, \"showParagraphRunning\", param => {\n      let parsedPara = this.state.parsedPara;\n      this.state.parsedPara.map((_, index) => {\n        if (param === 'queue') {\n          parsedPara[index].inQueue = true;\n          parsedPara[index].isOutputHidden = true;\n        } else if (param === 'loading') {\n          parsedPara[index].isRunning = true;\n          parsedPara[index].isOutputHidden = true;\n        } else if (param === index) {\n          parsedPara[index].isRunning = true;\n          parsedPara[index].isOutputHidden = true;\n        }\n      });\n      this.setState({\n        parsedPara\n      });\n    });\n\n    _defineProperty(this, \"paragraphSelector\", index => {\n      let parsedPara = this.state.parsedPara;\n      this.state.parsedPara.map((_, idx) => {\n        if (index === idx) parsedPara[idx].isSelected = true;else parsedPara[idx].isSelected = false;\n      });\n      this.setState({\n        parsedPara\n      });\n    });\n\n    _defineProperty(this, \"deleteParagraphButton\", (para, index) => {\n      if (index !== -1) {\n        return this.props.http.delete(`${API_PREFIX}/paragraph/` + this.props.openedNoteId + '/' + para.uniqueId).then(res => {\n          const paragraphs = [...this.state.paragraphs];\n          paragraphs.splice(index, 1);\n          const parsedPara = [...this.state.parsedPara];\n          parsedPara.splice(index, 1);\n          this.setState({\n            paragraphs,\n            parsedPara\n          });\n        }).catch(err => console.error('Delete paragraph issue: ', err.body.message));\n      }\n    });\n\n    _defineProperty(this, \"showDeleteParaModal\", (para, index) => {\n      this.setState({\n        modalLayout: getDeleteModal(() => this.setState({\n          isModalVisible: false\n        }), () => {\n          this.deleteParagraphButton(para, index);\n          this.setState({\n            isModalVisible: false\n          });\n        }, 'Delete paragraph', 'Are you sure you want to delete the paragraph? The action cannot be undone.')\n      });\n      this.setState({\n        isModalVisible: true\n      });\n    });\n\n    _defineProperty(this, \"showDeleteAllParaModal\", () => {\n      this.setState({\n        modalLayout: getDeleteModal(() => this.setState({\n          isModalVisible: false\n        }), async () => {\n          this.setState({\n            isModalVisible: false\n          });\n          await this.runForAllParagraphs((para, index) => {\n            return this.props.http.delete(`${API_PREFIX}/paragraph/${this.props.openedNoteId}/${para.uniqueId}`).then(res => {\n              this.setState({\n                paragraphs: res.paragraphs\n              });\n              this.parseAllParagraphs();\n            }).catch(err => console.error('Delete paragraph issue: ', err.body.message));\n          });\n          this.props.setToast('Paragraphs successfully deleted!');\n        }, 'Delete all paragraphs', 'Are you sure you want to delete all paragraphs? The action cannot be undone.')\n      });\n      this.setState({\n        isModalVisible: true\n      });\n    });\n\n    _defineProperty(this, \"showClearOutputsModal\", () => {\n      this.setState({\n        modalLayout: getDeleteModal(() => this.setState({\n          isModalVisible: false\n        }), () => {\n          this.clearParagraphButton();\n          this.setState({\n            isModalVisible: false\n          });\n        }, 'Clear all outputs', 'Are you sure you want to clear all outputs? The action cannot be undone.', 'Clear')\n      });\n      this.setState({\n        isModalVisible: true\n      });\n    });\n\n    _defineProperty(this, \"showRenameModal\", () => {\n      this.setState({\n        modalLayout: getCustomModal(newName => {\n          this.props.renameNotebook(newName, this.props.openedNoteId);\n          this.setState({\n            isModalVisible: false\n          });\n          this.loadNotebook();\n        }, () => this.setState({\n          isModalVisible: false\n        }), 'Name', 'Rename notebook', 'Cancel', 'Rename', this.state.path, CREATE_NOTE_MESSAGE)\n      });\n      this.setState({\n        isModalVisible: true\n      });\n    });\n\n    _defineProperty(this, \"showCloneModal\", () => {\n      this.setState({\n        modalLayout: getCustomModal(newName => {\n          this.props.cloneNotebook(newName, this.props.openedNoteId).then(id => {\n            window.location.assign(`${this.props.basename}#${id}`);\n            setTimeout(() => {\n              this.loadNotebook();\n            }, 100);\n          });\n          this.setState({\n            isModalVisible: false\n          });\n        }, () => this.setState({\n          isModalVisible: false\n        }), 'Name', 'Duplicate notebook', 'Cancel', 'Duplicate', this.state.path + ' (copy)', CREATE_NOTE_MESSAGE)\n      });\n      this.setState({\n        isModalVisible: true\n      });\n    });\n\n    _defineProperty(this, \"showDeleteNotebookModal\", () => {\n      this.setState({\n        modalLayout: /*#__PURE__*/React.createElement(DeleteNotebookModal, {\n          onConfirm: () => {\n            this.props.deleteNotebook(this.props.openedNoteId, this.state.path);\n            this.setState({\n              isModalVisible: false\n            });\n            window.location.replace(`${this.props.basename}#`);\n          },\n          onCancel: () => this.setState({\n            isModalVisible: false\n          }),\n          title: `Delete notebook \"${this.state.path}\"`,\n          message: \"Delete notebook will remove all contents in the paragraphs.\"\n        })\n      });\n      this.setState({\n        isModalVisible: true\n      });\n    });\n\n    _defineProperty(this, \"deleteVizualization\", uniqueId => {\n      this.props.http.delete(`${API_PREFIX}/paragraph/` + this.props.openedNoteId + '/' + uniqueId).then(res => {\n        this.setState({\n          paragraphs: res.paragraphs\n        });\n        this.parseAllParagraphs();\n      }).catch(err => console.error('Delete vizualization issue: ', err.body.message));\n    });\n\n    _defineProperty(this, \"addPara\", (index, newParaContent, inpType) => {\n      const addParaObj = {\n        noteId: this.props.openedNoteId,\n        paragraphIndex: index,\n        paragraphInput: newParaContent,\n        inputType: inpType\n      };\n      return this.props.http.post(`${API_PREFIX}/paragraph/`, {\n        body: JSON.stringify(addParaObj)\n      }).then(res => {\n        const paragraphs = [...this.state.paragraphs];\n        paragraphs.splice(index, 0, res);\n        const newPara = this.parseParagraphs([res])[0];\n        newPara.isInputExpanded = true;\n        const parsedPara = [...this.state.parsedPara];\n        parsedPara.splice(index, 0, newPara);\n        this.setState({\n          paragraphs,\n          parsedPara\n        });\n        this.paragraphSelector(index);\n      }).catch(err => console.error('Add paragraph issue: ', err.body.message));\n    });\n\n    _defineProperty(this, \"cloneParaButton\", (para, index) => {\n      let inputType = 'CODE';\n\n      if (para.isVizualisation === true) {\n        inputType = 'VISUALIZATION';\n      }\n\n      if (index !== -1) {\n        return this.addPara(index, para.inp, inputType);\n      }\n    });\n\n    _defineProperty(this, \"movePara\", (index, targetIndex) => {\n      const paragraphs = [...this.state.paragraphs];\n      paragraphs.splice(targetIndex, 0, paragraphs.splice(index, 1)[0]);\n      const parsedPara = [...this.state.parsedPara];\n      parsedPara.splice(targetIndex, 0, parsedPara.splice(index, 1)[0]);\n      const moveParaObj = {\n        noteId: this.props.openedNoteId,\n        paragraphs\n      };\n      return this.props.http.post(`${API_PREFIX}/set_paragraphs/`, {\n        body: JSON.stringify(moveParaObj)\n      }).then(res => this.setState({\n        paragraphs,\n        parsedPara\n      })).then(res => this.scrollToPara(targetIndex)).catch(err => console.error('Move paragraph issue: ', err.body.message));\n    });\n\n    _defineProperty(this, \"clearParagraphButton\", () => {\n      this.showParagraphRunning('loading');\n      const clearParaObj = {\n        noteId: this.props.openedNoteId\n      };\n      this.props.http.put(`${API_PREFIX}/paragraph/clearall/`, {\n        body: JSON.stringify(clearParaObj)\n      }).then(res => {\n        this.setState({\n          paragraphs: res.paragraphs\n        });\n        this.parseAllParagraphs();\n      }).catch(err => console.error('clear paragraph issue: ', err.body.message));\n    });\n\n    _defineProperty(this, \"updateRunParagraph\", (para, index, vizObjectInput) => {\n      this.showParagraphRunning(index);\n\n      if (vizObjectInput) {\n        para.inp = this.state.vizPrefix + vizObjectInput; // \"%sh check\"\n      }\n\n      const paraUpdateObject = {\n        noteId: this.props.openedNoteId,\n        paragraphId: para.uniqueId,\n        paragraphInput: para.inp\n      };\n      return this.props.http.post(`${API_PREFIX}/paragraph/update/run/`, {\n        body: JSON.stringify(paraUpdateObject)\n      }).then(res => {\n        const paragraphs = this.state.paragraphs;\n        paragraphs[index] = res;\n        const parsedPara = [...this.state.parsedPara];\n        parsedPara[index] = this.parseParagraphs([res])[0];\n        this.setState({\n          paragraphs,\n          parsedPara\n        });\n      }).catch(err => console.error('run paragraph issue: ', err.body.message));\n    });\n\n    _defineProperty(this, \"runForAllParagraphs\", reducer => {\n      return this.state.parsedPara.map((para, index) => () => reducer(para, index)).reduce((chain, func) => chain.then(func), Promise.resolve());\n    });\n\n    _defineProperty(this, \"textValueEditor\", (evt, index) => {\n      if (!(evt.key === 'Enter' && evt.shiftKey)) {\n        let parsedPara = this.state.parsedPara;\n        parsedPara[index].inp = evt.target.value;\n        this.setState({\n          parsedPara\n        });\n      }\n    });\n\n    _defineProperty(this, \"handleKeyPress\", (evt, para, index) => {\n      if (evt.key === 'Enter' && evt.shiftKey) {\n        this.updateRunParagraph(para, index);\n      }\n    });\n\n    _defineProperty(this, \"updateView\", (selectedViewId, scrollToIndex) => {\n      let parsedPara = [...this.state.parsedPara];\n      this.state.parsedPara.map((para, index) => {\n        parsedPara[index].isInputExpanded = selectedViewId === 'input_only';\n      });\n\n      if (scrollToIndex !== undefined) {\n        parsedPara[scrollToIndex].isInputExpanded = true;\n        this.scrollToPara(scrollToIndex);\n      }\n\n      this.setState({\n        parsedPara,\n        selectedViewId\n      });\n      this.paragraphSelector(scrollToIndex !== undefined ? scrollToIndex : -1);\n    });\n\n    _defineProperty(this, \"loadNotebook\", () => {\n      this.showParagraphRunning('queue');\n      this.props.http.get(`${API_PREFIX}/note/` + this.props.openedNoteId).then(res => {\n        this.setBreadcrumbs(res.path);\n        this.setState(res, this.parseAllParagraphs);\n      }).catch(err => console.error('Fetching notebook issue: ', err.body.message));\n    });\n\n    _defineProperty(this, \"setPara\", (para, index) => {\n      const parsedPara = [...this.state.parsedPara];\n      parsedPara.splice(index, 1, para);\n      this.setState({\n        parsedPara\n      });\n    });\n\n    this.state = {\n      selectedViewId: 'view_both',\n      path: '',\n      dateCreated: '',\n      dateModified: '',\n      paragraphs: [],\n      parsedPara: [],\n      vizPrefix: '',\n      isAddParaPopoverOpen: false,\n      isParaActionsPopoverOpen: false,\n      isNoteActionsPopoverOpen: false,\n      isModalVisible: false,\n      modalLayout: /*#__PURE__*/React.createElement(EuiOverlayMask, null)\n    };\n  }\n\n  scrollToPara(index) {\n    setTimeout(() => {\n      window.scrollTo({\n        left: 0,\n        top: this.state.parsedPara[index].paraDivRef.current.offsetTop,\n        behavior: 'smooth'\n      });\n    }, 0);\n  } // Function for clearing outputs button\n\n\n  setBreadcrumbs(path) {\n    this.props.setBreadcrumbs([{\n      text: 'Notebooks',\n      href: '#'\n    }, {\n      text: path,\n      href: `#${this.props.openedNoteId}`\n    }]);\n  }\n\n  componentDidMount() {\n    this.loadNotebook();\n  }\n\n  render() {\n    const viewOptions = [{\n      id: 'view_both',\n      label: 'View both'\n    }, {\n      id: 'input_only',\n      label: 'Input only'\n    }, {\n      id: 'output_only',\n      label: 'Output only'\n    }];\n    const addParaPanels = [{\n      id: 0,\n      title: 'Input type',\n      items: [{\n        name: 'Markdown',\n        onClick: () => {\n          this.setState({\n            isAddParaPopoverOpen: false\n          });\n          this.addPara(this.state.paragraphs.length, '', 'CODE');\n        }\n      }, {\n        name: 'Kibana visualization',\n        onClick: () => {\n          this.setState({\n            isAddParaPopoverOpen: false\n          });\n          this.addPara(this.state.paragraphs.length, '', 'VISUALIZATION');\n        }\n      }]\n    }];\n    const paraActionsPanels = [{\n      id: 0,\n      title: 'Paragraph actions',\n      items: [{\n        name: 'Add paragraph to top',\n        panel: 1\n      }, {\n        name: 'Add paragraph to bottom',\n        panel: 2\n      }, {\n        name: 'Run all paragraphs',\n        disabled: this.state.parsedPara.length === 0,\n        onClick: () => {\n          this.setState({\n            isParaActionsPopoverOpen: false\n          });\n          this.runForAllParagraphs((para, index) => {\n            return para.paraRef.current.runParagraph();\n          });\n\n          if (this.state.selectedViewId === 'input_only') {\n            this.updateView('view_both');\n          }\n        }\n      }, {\n        name: 'Clear all outputs',\n        disabled: this.state.parsedPara.length === 0,\n        onClick: () => {\n          this.setState({\n            isParaActionsPopoverOpen: false\n          });\n          this.showClearOutputsModal();\n        }\n      }, {\n        name: 'Delete all paragraphs',\n        disabled: this.state.parsedPara.length === 0,\n        onClick: () => {\n          this.setState({\n            isParaActionsPopoverOpen: false\n          });\n          this.showDeleteAllParaModal();\n        }\n      }]\n    }, {\n      id: 1,\n      title: 'Add to top',\n      items: [{\n        name: 'Markdown',\n        onClick: () => {\n          this.setState({\n            isParaActionsPopoverOpen: false\n          });\n          this.addPara(0, '', 'CODE');\n        }\n      }, {\n        name: 'Kibana visualization',\n        onClick: () => {\n          this.setState({\n            isParaActionsPopoverOpen: false\n          });\n          this.addPara(0, '', 'VISUALIZATION');\n        }\n      }]\n    }, {\n      id: 2,\n      title: 'Add to bottom',\n      items: [{\n        name: 'Markdown',\n        onClick: () => {\n          this.setState({\n            isParaActionsPopoverOpen: false\n          });\n          this.addPara(this.state.paragraphs.length, '', 'CODE');\n        }\n      }, {\n        name: 'Kibana visualization',\n        onClick: () => {\n          this.setState({\n            isParaActionsPopoverOpen: false\n          });\n          this.addPara(this.state.paragraphs.length, '', 'VISUALIZATION');\n        }\n      }]\n    }];\n    const noteActionsPanels = [{\n      id: 0,\n      title: 'Notebook actions',\n      items: [{\n        name: 'Rename notebook',\n        onClick: () => {\n          this.setState({\n            isNoteActionsPopoverOpen: false\n          });\n          this.showRenameModal();\n        }\n      }, {\n        name: 'Duplicate notebook',\n        onClick: () => {\n          this.setState({\n            isNoteActionsPopoverOpen: false\n          });\n          this.showCloneModal();\n        }\n      }, {\n        name: 'Delete notebook',\n        onClick: () => {\n          this.setState({\n            isNoteActionsPopoverOpen: false\n          });\n          this.showDeleteNotebookModal();\n        }\n      }]\n    }];\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EuiPage, null, /*#__PURE__*/React.createElement(EuiPageBody, {\n      component: \"div\"\n    }, /*#__PURE__*/React.createElement(EuiPageHeader, null, /*#__PURE__*/React.createElement(EuiPageHeaderSection, null, /*#__PURE__*/React.createElement(EuiTitle, {\n      size: \"l\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, this.state.path))), /*#__PURE__*/React.createElement(EuiPageHeaderSection, null, /*#__PURE__*/React.createElement(EuiFlexGroup, {\n      gutterSize: \"s\"\n    }, this.state.parsedPara.length > 0 && /*#__PURE__*/React.createElement(EuiFlexItem, null, /*#__PURE__*/React.createElement(EuiButtonGroup, {\n      buttonSize: \"m\",\n      options: viewOptions,\n      idSelected: this.state.selectedViewId,\n      onChange: id => {\n        this.updateView(id);\n      }\n    })), /*#__PURE__*/React.createElement(EuiFlexItem, null), /*#__PURE__*/React.createElement(EuiFlexItem, null, /*#__PURE__*/React.createElement(EuiPopover, {\n      panelPaddingSize: \"none\",\n      withTitle: true,\n      button: /*#__PURE__*/React.createElement(EuiButton, {\n        iconType: \"arrowDown\",\n        iconSide: \"right\",\n        onClick: () => this.setState({\n          isParaActionsPopoverOpen: true\n        })\n      }, \"Paragraph actions\"),\n      isOpen: this.state.isParaActionsPopoverOpen,\n      closePopover: () => this.setState({\n        isParaActionsPopoverOpen: false\n      })\n    }, /*#__PURE__*/React.createElement(EuiContextMenu, {\n      initialPanelId: 0,\n      panels: paraActionsPanels\n    }))), /*#__PURE__*/React.createElement(EuiFlexItem, null, /*#__PURE__*/React.createElement(EuiPopover, {\n      panelPaddingSize: \"none\",\n      withTitle: true,\n      button: /*#__PURE__*/React.createElement(EuiButton, {\n        iconType: \"arrowDown\",\n        iconSide: \"right\",\n        onClick: () => this.setState({\n          isNoteActionsPopoverOpen: true\n        })\n      }, \"Notebook actions\"),\n      isOpen: this.state.isNoteActionsPopoverOpen,\n      closePopover: () => this.setState({\n        isNoteActionsPopoverOpen: false\n      })\n    }, /*#__PURE__*/React.createElement(EuiContextMenu, {\n      initialPanelId: 0,\n      panels: noteActionsPanels\n    })))))), /*#__PURE__*/React.createElement(EuiText, {\n      color: \"subdued\"\n    }, \"Created: \", moment(this.state.dateCreated).format(DATE_FORMAT)), this.state.parsedPara.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Cells, null, /*#__PURE__*/React.createElement(PanelWrapper, {\n      shouldWrap: this.state.selectedViewId === 'output_only'\n    }, this.state.parsedPara.map((para, index) => {\n      var _this$state$paragraph;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        ref: this.state.parsedPara[index].paraDivRef,\n        key: `para_div_${para.uniqueId}`\n      }, /*#__PURE__*/React.createElement(Paragraphs, {\n        ref: this.state.parsedPara[index].paraRef,\n        para: para,\n        setPara: para => this.setPara(para, index),\n        dateModified: (_this$state$paragraph = this.state.paragraphs[index]) === null || _this$state$paragraph === void 0 ? void 0 : _this$state$paragraph.dateModified,\n        index: index,\n        paraCount: this.state.parsedPara.length,\n        paragraphSelector: this.paragraphSelector,\n        textValueEditor: this.textValueEditor,\n        handleKeyPress: this.handleKeyPress,\n        addPara: this.addPara,\n        DashboardContainerByValueRenderer: this.props.DashboardContainerByValueRenderer,\n        deleteVizualization: this.deleteVizualization,\n        http: this.props.http,\n        selectedViewId: this.state.selectedViewId,\n        setSelectedViewId: this.updateView,\n        deletePara: this.showDeleteParaModal,\n        runPara: this.updateRunParagraph,\n        clonePara: this.cloneParaButton,\n        movePara: this.movePara\n      }));\n    }))), this.state.selectedViewId !== 'output_only' && /*#__PURE__*/React.createElement(EuiPopover, {\n      panelPaddingSize: \"none\",\n      withTitle: true,\n      button: /*#__PURE__*/React.createElement(EuiButton, {\n        iconType: \"arrowDown\",\n        iconSide: \"right\",\n        onClick: () => this.setState({\n          isAddParaPopoverOpen: true\n        })\n      }, \"Add paragraph\"),\n      isOpen: this.state.isAddParaPopoverOpen,\n      closePopover: () => this.setState({\n        isAddParaPopoverOpen: false\n      })\n    }, /*#__PURE__*/React.createElement(EuiContextMenu, {\n      initialPanelId: 0,\n      panels: addParaPanels\n    }))) :\n    /*#__PURE__*/\n    // show default paragraph if no paragraphs in this notebook\n    React.createElement(\"div\", {\n      style: {\n        marginTop: 20\n      }\n    }, /*#__PURE__*/React.createElement(EuiPanel, null, /*#__PURE__*/React.createElement(EuiSpacer, {\n      size: \"xxl\"\n    }), /*#__PURE__*/React.createElement(EuiText, {\n      textAlign: \"center\"\n    }, /*#__PURE__*/React.createElement(\"h2\", null, \"No paragraphs\"), /*#__PURE__*/React.createElement(EuiText, null, \"Add a paragraph to compose your document or story. Notebooks now support two types of input:\")), /*#__PURE__*/React.createElement(EuiSpacer, {\n      size: \"xl\"\n    }), /*#__PURE__*/React.createElement(EuiFlexGroup, {\n      justifyContent: \"spaceEvenly\"\n    }, /*#__PURE__*/React.createElement(EuiFlexItem, {\n      grow: 2\n    }), /*#__PURE__*/React.createElement(EuiFlexItem, {\n      grow: 3\n    }, /*#__PURE__*/React.createElement(EuiCard, {\n      icon: /*#__PURE__*/React.createElement(EuiIcon, {\n        size: \"xxl\",\n        type: \"editorCodeBlock\"\n      }),\n      title: \"Markdown\",\n      description: \"Create rich text with markup language\",\n      footer: /*#__PURE__*/React.createElement(EuiButton, {\n        onClick: () => this.addPara(0, '', 'CODE'),\n        style: {\n          marginBottom: 17\n        }\n      }, \"Add markdown paragraph\")\n    })), /*#__PURE__*/React.createElement(EuiFlexItem, {\n      grow: 3\n    }, /*#__PURE__*/React.createElement(EuiCard, {\n      icon: /*#__PURE__*/React.createElement(EuiIcon, {\n        size: \"xxl\",\n        type: \"visArea\"\n      }),\n      title: \"Kibana visualization\",\n      description: \"Import Kibana visualizations to the notes\",\n      footer: /*#__PURE__*/React.createElement(EuiButton, {\n        onClick: () => this.addPara(0, '', 'VISUALIZATION'),\n        style: {\n          marginBottom: 17\n        }\n      }, \"Add Kibana visualization paragraph\")\n    })), /*#__PURE__*/React.createElement(EuiFlexItem, {\n      grow: 2\n    })), /*#__PURE__*/React.createElement(EuiSpacer, {\n      size: \"xxl\"\n    }))))), this.state.isModalVisible && this.state.modalLayout);\n  }\n\n}","/*\n * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\nimport React, { useState } from 'react';\nimport { Input, Prompt, Source } from '@nteract/presentational-components';\nimport { PLUGIN_ID } from '../../../common';\nimport { EuiFlexGroup, EuiFlexItem, EuiFormRow, EuiSuperDatePicker, EuiTextArea, EuiComboBox, EuiButton, EuiButtonEmpty, EuiModal, EuiModalBody, EuiModalFooter, EuiModalHeader, EuiModalHeaderTitle, EuiOverlayMask, EuiLink, EuiSelectable, EuiText, EuiSpacer, EuiHighlight } from '@elastic/eui';\n/*\n * \"ParaInput\" component is used by notebook to populate paragraph inputs for an open notebook.\n *\n * Props taken in as params are:\n * para - parsed paragraph from notebook\n * index - index of paragraph in the notebook\n * textValueEditor - function for handling input in textarea\n * handleKeyPress - function for handling key press like \"Shift-key+Enter\" to run paragraph\n *\n * Input component of nteract used as a container for notebook UI.\n * https://components.nteract.io/#input\n */\n\nexport const ParaInput = props => {\n  const {\n    para,\n    index,\n    runParaError,\n    textValueEditor,\n    handleKeyPress\n  } = props;\n\n  const renderParaInput = () => {\n    return /*#__PURE__*/React.createElement(Source, {\n      language: para.lang\n    }, para.isSelected ? /*#__PURE__*/React.createElement(EuiTextArea, {\n      className: \"editorArea\",\n      fullWidth: true,\n      isInvalid: runParaError,\n      onChange: evt => {\n        textValueEditor(evt, index);\n        props.setIsOutputStale(true);\n      },\n      onKeyPress: evt => handleKeyPress(evt, para, index),\n      value: para.inp,\n      autoFocus: true\n    }) : para.inp);\n  };\n\n  const renderVisInput = () => {\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [selectableOptions, setSelectableOptions] = useState([]);\n    const [selectableError, setSelectableError] = useState(false);\n\n    const onSelect = () => {\n      const selectedOptions = selectableOptions.filter(opt => opt.checked === 'on');\n\n      if (selectedOptions.length === 0) {\n        setSelectableError(true);\n        return;\n      }\n\n      props.setIsOutputStale(true);\n      props.setSelectedVisOption(selectedOptions);\n      setIsModalOpen(false);\n    };\n\n    const renderOption = (option, searchValue) => {\n      const href = window.location.href;\n      const visURL = `${href.substring(0, href.indexOf(PLUGIN_ID))}visualize#/edit/${option.key}` + `?_g=(filters:!(),refreshInterval:(pause:!t,value:0),time:(from:'${props.startTime}',to:'${props.endTime}'))`;\n      return /*#__PURE__*/React.createElement(EuiLink, {\n        href: visURL,\n        target: \"_blank\"\n      }, /*#__PURE__*/React.createElement(EuiHighlight, {\n        search: searchValue\n      }, option.label));\n    };\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EuiFlexGroup, {\n      alignItems: \"flexEnd\",\n      gutterSize: \"s\"\n    }, /*#__PURE__*/React.createElement(EuiFlexItem, {\n      grow: 6\n    }, /*#__PURE__*/React.createElement(EuiFormRow, {\n      label: \"Title\",\n      fullWidth: true\n    }, /*#__PURE__*/React.createElement(EuiComboBox, {\n      placeholder: \"Find Kibana visualization\",\n      singleSelection: {\n        asPlainText: true\n      },\n      options: props.visOptions,\n      selectedOptions: props.selectedVisOption,\n      onChange: newOption => {\n        props.setSelectedVisOption(newOption);\n        props.setIsOutputStale(true);\n      }\n    }))), /*#__PURE__*/React.createElement(EuiFlexItem, {\n      grow: false\n    }, /*#__PURE__*/React.createElement(EuiButton, {\n      onClick: () => {\n        setSelectableOptions(props.visOptions);\n        setSelectableError(false);\n        setIsModalOpen(true);\n      }\n    }, \"Browse\")), /*#__PURE__*/React.createElement(EuiFlexItem, {\n      grow: 2\n    }), /*#__PURE__*/React.createElement(EuiFlexItem, {\n      grow: 9\n    }, /*#__PURE__*/React.createElement(EuiFormRow, {\n      label: \"Date range\",\n      fullWidth: true\n    }, /*#__PURE__*/React.createElement(EuiSuperDatePicker, {\n      start: props.startTime,\n      end: props.endTime,\n      showUpdateButton: false,\n      dateFormat: \"MM/DD/YYYY hh:mm:ss A\",\n      onTimeChange: e => {\n        props.setStartTime(e.start);\n        props.setEndTime(e.end);\n        props.setIsOutputStale(true);\n      }\n    }))), /*#__PURE__*/React.createElement(EuiFlexItem, null)), isModalOpen && /*#__PURE__*/React.createElement(EuiOverlayMask, null, /*#__PURE__*/React.createElement(EuiModal, {\n      onClose: () => setIsModalOpen(false),\n      style: {\n        width: 500\n      }\n    }, /*#__PURE__*/React.createElement(EuiModalHeader, null, /*#__PURE__*/React.createElement(EuiModalHeaderTitle, null, \"Browse Kibana visualizations\")), /*#__PURE__*/React.createElement(EuiModalBody, null, /*#__PURE__*/React.createElement(EuiSelectable, {\n      \"aria-label\": \"Searchable Visualizations\",\n      searchable: true,\n      options: selectableOptions,\n      singleSelection: true,\n      renderOption: renderOption,\n      onChange: newOptions => {\n        setSelectableOptions(newOptions);\n        setSelectableError(false);\n      }\n    }, (list, search) => /*#__PURE__*/React.createElement(React.Fragment, null, search, list)), selectableError && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EuiSpacer, {\n      size: \"s\"\n    }), /*#__PURE__*/React.createElement(EuiText, {\n      color: \"danger\",\n      size: \"s\"\n    }, 'Visualization is required.'))), /*#__PURE__*/React.createElement(EuiModalFooter, null, /*#__PURE__*/React.createElement(EuiButtonEmpty, {\n      onClick: () => setIsModalOpen(false)\n    }, \"Cancel\"), /*#__PURE__*/React.createElement(EuiButton, {\n      onClick: () => onSelect(),\n      fill: true\n    }, \"Select\")))));\n  };\n\n  return /*#__PURE__*/React.createElement(Input, {\n    hidden: para.isInputHidden\n  }, /*#__PURE__*/React.createElement(Prompt, {\n    blank: true,\n    running: para.isRunning,\n    queued: para.inQueue\n  }), para.isVizualisation ? renderVisInput() : renderParaInput());\n};","/*\n * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\nimport React from 'react';\nimport { Outputs } from '@nteract/presentational-components';\nimport { Media } from '@nteract/outputs';\nimport MarkdownRender from '@nteract/markdown';\nimport { EuiText } from '@elastic/eui';\nimport { DATE_FORMAT } from '../../../common';\nimport moment from 'moment';\n/*\n * \"ParaOutput\" component is used by notebook to populate paragraph outputs for an open notebook.\n *\n * Props taken in as params are:\n * para - parsed paragraph from notebook\n *\n * Outputs component of nteract used as a container for notebook UI.\n * https://components.nteract.io/#outputs\n */\n\nexport const ParaOutput = props => {\n  const outputBody = (key, typeOut, val) => {\n    var _visInput$timeRange, _visInput$timeRange2;\n\n    /* Returns a component to render paragraph outputs using the para.typeOut property\n     * Currently supports HTML, TABLE, IMG\n     * TODO: add table rendering\n     */\n    if (typeOut !== undefined) {\n      switch (typeOut) {\n        case 'MARKDOWN':\n          return /*#__PURE__*/React.createElement(EuiText, {\n            key: key,\n            className: \"markdown-output-text\"\n          }, /*#__PURE__*/React.createElement(MarkdownRender, {\n            source: val\n          }));\n\n        case 'VISUALIZATION':\n          let from = moment(visInput === null || visInput === void 0 ? void 0 : (_visInput$timeRange = visInput.timeRange) === null || _visInput$timeRange === void 0 ? void 0 : _visInput$timeRange.from).format(DATE_FORMAT);\n          let to = moment(visInput === null || visInput === void 0 ? void 0 : (_visInput$timeRange2 = visInput.timeRange) === null || _visInput$timeRange2 === void 0 ? void 0 : _visInput$timeRange2.to).format(DATE_FORMAT);\n          from = from === 'Invalid date' ? visInput.timeRange.from : from;\n          to = to === 'Invalid date' ? visInput.timeRange.to : to;\n          return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EuiText, {\n            size: \"s\",\n            style: {\n              marginLeft: 9\n            }\n          }, `${from} - ${to}`), /*#__PURE__*/React.createElement(DashboardContainerByValueRenderer, {\n            key: key,\n            input: visInput,\n            onInputUpdated: setVisInput\n          }));\n\n        case 'HTML':\n          return /*#__PURE__*/React.createElement(EuiText, {\n            key: key\n          }, /*#__PURE__*/React.createElement(Media.HTML, {\n            data: val\n          }));\n\n        case 'TABLE':\n          return /*#__PURE__*/React.createElement(\"pre\", {\n            key: key\n          }, val);\n\n        case 'IMG':\n          return /*#__PURE__*/React.createElement(\"img\", {\n            alt: \"\",\n            src: 'data:image/gif;base64,' + val,\n            key: key\n          });\n\n        default:\n          return /*#__PURE__*/React.createElement(\"pre\", {\n            key: key\n          }, val);\n      }\n    } else {\n      console.log('output not supported', typeOut);\n      return /*#__PURE__*/React.createElement(\"pre\", null);\n    }\n  };\n\n  const {\n    para,\n    DashboardContainerByValueRenderer,\n    visInput,\n    setVisInput\n  } = props;\n  return /*#__PURE__*/React.createElement(Outputs, {\n    hidden: para.isOutputHidden\n  }, para.typeOut.map((typeOut, tIdx) => outputBody(para.uniqueId + '_paraOutputBody', typeOut, para.out[tIdx])));\n};","/*\n * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\").\n * You may not use this file except in compliance with the License.\n * A copy of the License is located at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * or in the \"license\" file accompanying this file. This file is distributed\n * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n * express or implied. See the License for the specific language governing\n * permissions and limitations under the License.\n */\nimport React, { useState, useEffect, forwardRef, useImperativeHandle } from 'react';\nimport moment from 'moment';\nimport { Cell } from '@nteract/presentational-components';\nimport { EuiPanel, EuiFlexGroup, EuiFlexItem, EuiText, EuiHorizontalRule, EuiButtonIcon, EuiSpacer, EuiPopover, EuiContextMenu, EuiButton, EuiIcon, EuiLink } from '@elastic/eui';\nimport { htmlIdGenerator } from '@elastic/eui/lib/services';\nimport { ViewMode } from '../../../../../src/plugins/embeddable/public';\nimport { ParaOutput } from './para_output';\nimport { ParaInput } from './para_input';\nimport { API_PREFIX, DATE_FORMAT } from '../../../common';\n/*\n * \"Paragraphs\" component is used to render cells of the notebook open and \"add para div\" between paragraphs\n *\n * Props taken in as params are:\n * para - parsed paragraph from notebook\n * dateModified - last modified time of paragraph\n * index - index of paragraph in the notebook\n * paragraphSelector - function used to select a para on click\n * textValueEditor - function for handling input in textarea\n * handleKeyPress - function for handling key press like \"Shift-key+Enter\" to run paragraph\n * addPara - function to add a new para onclick - \"Add Para\" Div\n * DashboardContainerByValueRenderer - Dashboard container renderer for visualization\n * deleteVizualization - function to delete a para\n * http object - for making API requests\n * selectedViewId - selected view: view_both, input_only, output_only\n * deletePara - function to delete the selected para\n * runPara - function to run the selected para\n * clonePara - function to clone the selected para\n * clearPara - function to clear output of all the paras\n * movePara - function to move a paragraph at an index to another index\n *\n * Cell component of nteract used as a container for paragraphs in notebook UI.\n * https://components.nteract.io/#cell\n */\n\nexport const Paragraphs = /*#__PURE__*/forwardRef((props, ref) => {\n  const {\n    para,\n    index,\n    paragraphSelector,\n    textValueEditor,\n    handleKeyPress,\n    addPara,\n    DashboardContainerByValueRenderer,\n    deleteVizualization,\n    http\n  } = props;\n  const [visOptions, setVisOptions] = useState([]); // options for loading saved visualizations\n\n  const [isPopoverOpen, setIsPopoverOpen] = useState(false);\n  const [runParaError, setRunParaError] = useState(false);\n  const [selectedVisOption, setSelectedVisOption] = useState([]);\n  const [visInput, setVisInput] = useState(undefined);\n  const [toggleVisEdit, setToggleVisEdit] = useState(false); // output is available if it's not cleared and vis paragraph has a selected visualization\n\n  const isOutputAvailable = para.out.length > 0 && para.out[0] !== '' || para.isVizualisation && para.typeOut.length > 0 && visInput !== undefined;\n  useImperativeHandle(ref, () => ({\n    runParagraph() {\n      return onRunPara();\n    }\n\n  }));\n  useEffect(() => {\n    if (para.isVizualisation) {\n      if (para.visSavedObjId !== '') setVisInput(JSON.parse(para.vizObjectInput));\n      http.get(`${API_PREFIX}/visualizations`).then(res => {\n        const opt = res.savedVisualizations.map(vizObject => ({\n          label: vizObject.label,\n          key: vizObject.key\n        }));\n        setVisOptions(opt);\n        setSelectedVisOption(opt.filter(o => o.key === para.visSavedObjId));\n      }).catch(err => console.error('Fetching visualization issue', err.body.message));\n    }\n  }, []);\n\n  const createNewVizObject = objectId => {\n    const vizUniqueId = htmlIdGenerator()(); // a dashboard container object for new visualization\n\n    const newVizObject = {\n      viewMode: ViewMode.VIEW,\n      panels: {\n        '1': {\n          gridData: {\n            x: 0,\n            y: 0,\n            w: 50,\n            h: 20,\n            i: '1'\n          },\n          type: 'visualization',\n          explicitInput: {\n            id: '1',\n            savedObjectId: objectId\n          }\n        }\n      },\n      isFullScreenMode: false,\n      filters: [],\n      useMargins: false,\n      id: vizUniqueId,\n      timeRange: {\n        to: para.visEndTime,\n        from: para.visStartTime\n      },\n      title: 'embed_viz_' + vizUniqueId,\n      query: {\n        query: '',\n        language: 'lucene'\n      },\n      refreshConfig: {\n        pause: true,\n        value: 15\n      }\n    };\n    return newVizObject;\n  };\n\n  const onRunPara = () => {\n    if (!para.isVizualisation && !para.inp || para.isVizualisation && selectedVisOption.length === 0) {\n      setRunParaError(true);\n      return;\n    }\n\n    let newVisObjectInput = undefined;\n\n    if (para.isVizualisation) {\n      const inputTemp = createNewVizObject(selectedVisOption[0].key);\n      setVisInput(inputTemp);\n      setRunParaError(false);\n      newVisObjectInput = JSON.stringify(inputTemp);\n    }\n\n    setRunParaError(false);\n    return props.runPara(para, index, newVisObjectInput);\n  };\n\n  const setStartTime = time => {\n    const newPara = props.para;\n    newPara.visStartTime = time;\n    props.setPara(newPara);\n  };\n\n  const setEndTime = time => {\n    const newPara = props.para;\n    newPara.visEndTime = time;\n    props.setPara(newPara);\n  };\n\n  const setIsOutputStale = isStale => {\n    const newPara = props.para;\n    newPara.isOutputStale = isStale;\n    props.setPara(newPara);\n  }; // do not show output if it is a visualization paragraph and visInput is not loaded yet\n\n\n  const paraOutput = (!para.isVizualisation || visInput) && /*#__PURE__*/React.createElement(ParaOutput, {\n    key: para.uniqueId,\n    para: para,\n    visInput: visInput,\n    setVisInput: setVisInput,\n    DashboardContainerByValueRenderer: DashboardContainerByValueRenderer\n  }); // do not show input and EuiPanel if view mode is output_only\n\n  if (props.selectedViewId === 'output_only') {\n    return paraOutput;\n  }\n\n  const renderParaHeader = (type, index) => {\n    const panels = [{\n      id: 0,\n      title: 'Paragraph actions',\n      items: [{\n        name: 'Insert paragraph above',\n        panel: 1\n      }, {\n        name: 'Insert paragraph below',\n        panel: 2\n      }, {\n        name: 'Run input',\n        onClick: () => {\n          setIsPopoverOpen(false);\n          onRunPara();\n        }\n      }, {\n        name: 'Move up',\n        disabled: index === 0,\n        onClick: () => {\n          setIsPopoverOpen(false);\n          props.movePara(index, index - 1);\n        }\n      }, {\n        name: 'Move to top',\n        disabled: index === 0,\n        onClick: () => {\n          setIsPopoverOpen(false);\n          props.movePara(index, 0);\n        }\n      }, {\n        name: 'Move down',\n        disabled: index === props.paraCount - 1,\n        onClick: () => {\n          setIsPopoverOpen(false);\n          props.movePara(index, index + 1);\n        }\n      }, {\n        name: 'Move to bottom',\n        disabled: index === props.paraCount - 1,\n        onClick: () => {\n          setIsPopoverOpen(false);\n          props.movePara(index, props.paraCount - 1);\n        }\n      }, {\n        name: 'Duplicate',\n        onClick: () => {\n          setIsPopoverOpen(false);\n          props.clonePara(para, index + 1);\n        }\n      }, {\n        name: 'Delete',\n        onClick: () => {\n          setIsPopoverOpen(false);\n          props.deletePara(para, index);\n        }\n      }]\n    }, {\n      id: 1,\n      title: 'Insert paragraph above',\n      items: [{\n        name: 'Markdown',\n        onClick: () => {\n          setIsPopoverOpen(false);\n          props.addPara(index, '', 'CODE');\n        }\n      }, {\n        name: 'Visualization',\n        onClick: () => {\n          setIsPopoverOpen(false);\n          props.addPara(index, '', 'VISUALIZATION');\n        }\n      }]\n    }, {\n      id: 2,\n      title: 'Insert paragraph below',\n      items: [{\n        name: 'Markdown',\n        onClick: () => {\n          setIsPopoverOpen(false);\n          props.addPara(index + 1, '', 'CODE');\n        }\n      }, {\n        name: 'Visualization',\n        onClick: () => {\n          setIsPopoverOpen(false);\n          props.addPara(index + 1, '', 'VISUALIZATION');\n        }\n      }]\n    }];\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EuiFlexGroup, null, /*#__PURE__*/React.createElement(EuiFlexItem, null, /*#__PURE__*/React.createElement(EuiText, {\n      style: {\n        fontSize: 17\n      }\n    }, `[${index + 1}] ${type} `, /*#__PURE__*/React.createElement(EuiButtonIcon, {\n      \"aria-label\": \"Toggle show input\",\n      iconType: para.isInputExpanded ? \"arrowUp\" : \"arrowDown\",\n      onClick: () => {\n        const newPara = props.para;\n        newPara.isInputExpanded = !newPara.isInputExpanded;\n        props.setPara(newPara);\n      }\n    }))), /*#__PURE__*/React.createElement(EuiFlexItem, {\n      grow: false\n    }, /*#__PURE__*/React.createElement(EuiPopover, {\n      panelPaddingSize: \"none\",\n      withTitle: true,\n      button: /*#__PURE__*/React.createElement(EuiButtonIcon, {\n        \"aria-label\": \"Open paragraph menu\",\n        iconType: \"boxesHorizontal\",\n        onClick: () => setIsPopoverOpen(true)\n      }),\n      isOpen: isPopoverOpen,\n      closePopover: () => setIsPopoverOpen(false)\n    }, /*#__PURE__*/React.createElement(EuiContextMenu, {\n      initialPanelId: 0,\n      panels: panels\n    })))), /*#__PURE__*/React.createElement(EuiSpacer, {\n      size: \"s\"\n    }));\n  };\n\n  const renderOutputTimestampMessage = () => {\n    if (props.selectedViewId === 'view_both') {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EuiFlexItem, {\n        grow: false\n      }), /*#__PURE__*/React.createElement(EuiFlexItem, {\n        grow: false\n      }, para.isOutputStale ? /*#__PURE__*/React.createElement(EuiIcon, {\n        type: \"questionInCircle\",\n        color: \"primary\"\n      }) : /*#__PURE__*/React.createElement(EuiIcon, {\n        type: \"check\",\n        color: \"secondary\"\n      })), /*#__PURE__*/React.createElement(EuiFlexItem, null, /*#__PURE__*/React.createElement(EuiText, {\n        color: \"subdued\"\n      }, `Last run ${moment(props.dateModified).format(DATE_FORMAT)}. ${para.isOutputStale ? 'Output below is stale.' : 'Output reflects the latest input.'}`)));\n    } else {\n      // render message when view mode is input_only\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EuiFlexItem, {\n        grow: false\n      }), /*#__PURE__*/React.createElement(EuiFlexItem, {\n        grow: false\n      }, /*#__PURE__*/React.createElement(EuiIcon, {\n        type: \"questionInCircle\",\n        color: \"primary\"\n      })), /*#__PURE__*/React.createElement(EuiFlexItem, {\n        grow: false\n      }, /*#__PURE__*/React.createElement(EuiText, {\n        color: \"subdued\"\n      }, `Output available from ${moment(props.dateModified).format(DATE_FORMAT)}`)), /*#__PURE__*/React.createElement(EuiFlexItem, null, /*#__PURE__*/React.createElement(EuiText, null, /*#__PURE__*/React.createElement(EuiLink, {\n        onClick: () => props.setSelectedViewId('view_both', index)\n      }, \"View both\"))));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EuiPanel, null, renderParaHeader(para.isVizualisation ? 'Kibana visualization' : 'Markdown', index), /*#__PURE__*/React.createElement(Cell, {\n    key: index,\n    onClick: () => paragraphSelector(index)\n  }, para.isInputExpanded && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EuiSpacer, {\n    size: \"s\"\n  }), /*#__PURE__*/React.createElement(ParaInput, {\n    para: para,\n    index: index,\n    runParaError: runParaError,\n    textValueEditor: textValueEditor,\n    handleKeyPress: handleKeyPress,\n    startTime: para.visStartTime,\n    setStartTime: setStartTime,\n    endTime: para.visEndTime,\n    setEndTime: setEndTime,\n    setIsOutputStale: setIsOutputStale,\n    visOptions: visOptions,\n    selectedVisOption: selectedVisOption,\n    setSelectedVisOption: setSelectedVisOption\n  }), runParaError && /*#__PURE__*/React.createElement(EuiText, {\n    color: \"danger\",\n    size: \"s\"\n  }, `${para.isVizualisation ? 'Visualization' : 'Input'} is required.`), /*#__PURE__*/React.createElement(EuiSpacer, {\n    size: \"m\"\n  }), /*#__PURE__*/React.createElement(EuiFlexGroup, {\n    alignItems: \"center\",\n    gutterSize: \"s\"\n  }, /*#__PURE__*/React.createElement(EuiFlexItem, {\n    grow: false\n  }, /*#__PURE__*/React.createElement(EuiButton, {\n    onClick: () => onRunPara()\n  }, isOutputAvailable ? 'Refresh' : 'Run')), isOutputAvailable && renderOutputTimestampMessage()), /*#__PURE__*/React.createElement(EuiSpacer, {\n    size: \"m\"\n  })), props.selectedViewId !== 'input_only' && isOutputAvailable && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(EuiHorizontalRule, {\n    margin: \"none\"\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      opacity: para.isOutputStale ? 0.5 : 1\n    }\n  }, paraOutput)))));\n});"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9DA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACzIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvtBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}